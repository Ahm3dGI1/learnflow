# Personal Learning Report - Visual Integration Map

## High-Level System Overview

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                          LEARNFLOW APPLICATION                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FRONTEND (React)                                    â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ App.js (Router)                                                 â”‚   â”‚
â”‚  â”‚ â”œâ”€ /dashboard â†’ Dashboard.jsx                                   â”‚   â”‚
â”‚  â”‚ â”œâ”€ /learning-report â†’ LearningReport.jsx âœ¨ NEW               â”‚   â”‚
â”‚  â”‚ â””â”€ /video/:id â†’ VideoPage.jsx                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Dashboard.jsx                                                    â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚ â”‚ Header                                                     â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ â”œâ”€ Logo: LearnFlow                                        â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ â”œâ”€ ğŸ“Š Learning Report Button âœ¨ NEW                      â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ â””â”€ Logout                                                 â”‚  â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚ â”‚ Content                                                    â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ â”œâ”€ Welcome Section                                         â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ â”œâ”€ Video Input                                            â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ â””â”€ Video History Grid                                     â”‚  â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ LearningReport.jsx âœ¨ NEW                                        â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚ â”‚ useEffect Hook                                            â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ â†“                                                          â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ learningReportService.getLearningReport(uid)              â”‚  â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚ â”‚ Components (Conditional Render)                           â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ â”œâ”€ Loading State â†’ Skeleton                              â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ â”œâ”€ Error State â†’ Error Message + Retry                  â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ â”œâ”€ Empty State â†’ New User Guidance                       â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ â””â”€ Success State â†’ Statistics Grid                       â”‚  â”‚   â”‚
â”‚  â”‚ â”‚    â”œâ”€ StatCard Ã— 6                                       â”‚  â”‚   â”‚
â”‚  â”‚ â”‚    â”œâ”€ Activity Section                                   â”‚  â”‚   â”‚
â”‚  â”‚ â”‚    â””â”€ Action Buttons                                     â”‚  â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                           â”‚
â”‚  Services Layer:                                                         â”‚
â”‚  â”œâ”€ learningReportService.js âœ¨ NEW                                    â”‚   â”‚
â”‚  â”‚  â””â”€ getLearningReport(firebaseUid)                                 â”‚   â”‚
â”‚  â”œâ”€ api.js (HTTP Client)                                              â”‚   â”‚
â”‚  â”œâ”€ progressService.js                                                â”‚   â”‚
â”‚  â”œâ”€ videoService.js                                                   â”‚   â”‚
â”‚  â””â”€ llmService.js                                                     â”‚   â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â”‚ HTTP GET Request
                                      â”‚ Authorization: Bearer token
                                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       BACKEND (Flask)                                    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ app.py (Main Application)                                      â”‚   â”‚
â”‚  â”‚ â”œâ”€ CORS enabled                                                â”‚   â”‚
â”‚  â”‚ â”œâ”€ Blueprint registration:                                     â”‚   â”‚
â”‚  â”‚ â”‚  â”œâ”€ /api/videos â†’ video_bp                                  â”‚   â”‚
â”‚  â”‚ â”‚  â”œâ”€ /api/users â†’ user_bp                                    â”‚   â”‚
â”‚  â”‚ â”‚  â”œâ”€ /api/progress â†’ progress_bp                             â”‚   â”‚
â”‚  â”‚ â”‚  â”œâ”€ /api/chat â†’ llm_bp                                      â”‚   â”‚
â”‚  â”‚ â”‚  â””â”€ /api/learning-report â†’ learning_report_bp âœ¨ NEW        â”‚   â”‚
â”‚  â”‚ â””â”€ Error handlers                                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ learning_report_routes.py âœ¨ NEW                               â”‚   â”‚
â”‚  â”‚ GET /api/learning-report/users/<firebase_uid>                 â”‚   â”‚
â”‚  â”‚                                                                â”‚   â”‚
â”‚  â”‚ @auth_required decorator                                       â”‚   â”‚
â”‚  â”‚ â”œâ”€ Validate Firebase token                                    â”‚   â”‚
â”‚  â”‚ â””â”€ Attach claims to g.firebase_user                          â”‚   â”‚
â”‚  â”‚                                                                â”‚   â”‚
â”‚  â”‚ Authorization Check                                            â”‚   â”‚
â”‚  â”‚ â””â”€ Verify user accessing own report                          â”‚   â”‚
â”‚  â”‚                                                                â”‚   â”‚
â”‚  â”‚ Database Lookup                                               â”‚   â”‚
â”‚  â”‚ â””â”€ get_user_by_firebase_uid() â†’ user.id                      â”‚   â”‚
â”‚  â”‚                                                                â”‚   â”‚
â”‚  â”‚ Service Call                                                  â”‚   â”‚
â”‚  â”‚ â””â”€ get_learning_report(user.id)                              â”‚   â”‚
â”‚  â”‚                                                                â”‚   â”‚
â”‚  â”‚ Response                                                      â”‚   â”‚
â”‚  â”‚ â””â”€ {data: {...statistics...}}                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ learning_report_service.py âœ¨ NEW                              â”‚   â”‚
â”‚  â”‚                                                                â”‚   â”‚
â”‚  â”‚ get_learning_report(user_id, db)                              â”‚   â”‚
â”‚  â”‚ â”œâ”€ Verify user exists                                        â”‚   â”‚
â”‚  â”‚ â”œâ”€ Query UserVideoProgress                                   â”‚   â”‚
â”‚  â”‚ â”‚  â””â”€ Calculate: videos, completion rate, watch time         â”‚   â”‚
â”‚  â”‚ â”œâ”€ Query UserQuizAttempt                                     â”‚   â”‚
â”‚  â”‚ â”‚  â””â”€ Calculate: attempts, scores (avg/high/low)             â”‚   â”‚
â”‚  â”‚ â”œâ”€ Query UserCheckpointCompletion                            â”‚   â”‚
â”‚  â”‚ â”‚  â””â”€ Calculate: total completed                             â”‚   â”‚
â”‚  â”‚ â”œâ”€ _calculate_learning_streak()                              â”‚   â”‚
â”‚  â”‚ â”‚  â””â”€ Determine consecutive days with activity               â”‚   â”‚
â”‚  â”‚ â”œâ”€ _get_recent_activity()                                    â”‚   â”‚
â”‚  â”‚ â”‚  â””â”€ Break down activity by day (last 7 days)               â”‚   â”‚
â”‚  â”‚ â””â”€ _get_last_activity_date()                                 â”‚   â”‚
â”‚  â”‚    â””â”€ Find most recent learning activity                     â”‚   â”‚
â”‚  â”‚                                                                â”‚   â”‚
â”‚  â”‚ return {aggregated_statistics}                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚  Services Layer:                                                        â”‚
â”‚  â”œâ”€ learning_report_service.py âœ¨ NEW                                 â”‚
â”‚  â”œâ”€ progress_service.py                                               â”‚
â”‚  â”œâ”€ quiz_service.py                                                   â”‚
â”‚  â”œâ”€ checkpoint_service.py                                             â”‚
â”‚  â”œâ”€ video_service.py                                                  â”‚
â”‚  â””â”€ user_service.py                                                   â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â”‚ Database Queries
                                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       DATABASE (SQLAlchemy/SQLite)                       â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ users                â”‚  â”‚ user_video_progress  â”‚                    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚
â”‚  â”‚ id (PK)              â”‚  â”‚ id (PK)              â”‚                    â”‚
â”‚  â”‚ firebase_uid         â”‚  â”‚ user_id (FK)         â”‚â—„â”€â”€â”                â”‚
â”‚  â”‚ email                â”‚  â”‚ video_id (FK)        â”‚   â”‚ Joins          â”‚
â”‚  â”‚ display_name         â”‚  â”‚ last_position_sec    â”‚   â”‚                â”‚
â”‚  â”‚ created_at           â”‚  â”‚ is_completed         â”‚   â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ watch_count          â”‚   â”‚                â”‚
â”‚                            â”‚ first_watched_at     â”‚   â”‚                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ last_watched_at      â”‚   â”‚                â”‚
â”‚  â”‚ user_quiz_attempts   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              â”‚                â”‚
â”‚  â”‚ id (PK)              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                â”‚
â”‚  â”‚ user_id (FK) â—„â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”‚ user_checkpoint_...  â”‚    â”‚                â”‚
â”‚  â”‚ quiz_id (FK)         â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚                â”‚
â”‚  â”‚ score                â”‚  â”‚ id (PK)              â”‚    â”‚                â”‚
â”‚  â”‚ answers              â”‚  â”‚ user_id (FK) â—„â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”              â”‚
â”‚  â”‚ submitted_at         â”‚  â”‚ checkpoint_id (FK)   â”‚    â”‚ â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ is_completed         â”‚    â”‚ â”‚              â”‚
â”‚                            â”‚ completed_at         â”‚    â”‚ â”‚              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ attempt_count        â”‚    â”‚ â”‚              â”‚
â”‚  â”‚ videos               â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚              â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              â”‚ â”‚              â”‚
â”‚  â”‚ id (PK)              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚              â”‚
â”‚  â”‚ youtube_video_id     â”‚                           â”‚  â”‚ â”‚              â”‚
â”‚  â”‚ title                â”‚                           â†“  â”‚ â”‚              â”‚
â”‚  â”‚ description          â”‚                    Aggregated â”‚ â”‚              â”‚
â”‚  â”‚ duration_seconds     â”‚                    Statistics â”‚ â”‚              â”‚
â”‚  â”‚ transcript           â”‚                           â–²  â”‚ â”‚              â”‚
â”‚  â”‚ checkpoints_data     â”‚                           â”‚  â”‚ â”‚              â”‚
â”‚  â”‚ quiz_data            â”‚                           â””â”€â”€â”¼â”€â”˜              â”‚
â”‚  â”‚ summary              â”‚ Returns aggregated data       â”‚                â”‚
â”‚  â”‚ created_at           â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚                                                                          â”‚
â”‚  Queries Executed:                                                     â”‚
â”‚  1. SELECT * FROM users WHERE id = ?                                  â”‚
â”‚  2. SELECT * FROM user_video_progress WHERE user_id = ?               â”‚
â”‚  3. SELECT * FROM user_quiz_attempts WHERE user_id = ?                â”‚
â”‚  4. SELECT DISTINCT quiz_id FROM user_quiz_attempts WHERE user_id = ? â”‚
â”‚  5. SELECT * FROM user_checkpoint_completion WHERE user_id = ?        â”‚
â”‚  6. [Activity queries with date filters]                              â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â”‚ JSON Response
                                      â”‚ {
                                      â”‚   "data": {
                                      â”‚     totalVideosWatched: 5,
                                      â”‚     completionRate: 60.0,
                                      â”‚     averageQuizScore: 78.5,
                                      â”‚     learningStreak: 5,
                                      â”‚     ...
                                      â”‚   }
                                      â”‚ }
                                      â†“
                            (Back to Frontend)
                                      â”‚
                                      â†“
                        Render Statistics Cards
                        Display Activity Timeline
                        Show Learning Achievements
```

## Component Hierarchy

```
App
â”œâ”€ AuthProvider
â”‚  â””â”€ BrowserRouter
â”‚     â””â”€ Routes
â”‚        â”œâ”€ Route / â†’ Home
â”‚        â”œâ”€ Route /login â†’ Login
â”‚        â”œâ”€ Route /signup â†’ Signup
â”‚        â”œâ”€ Route /dashboard â†’ ProtectedRoute
â”‚        â”‚  â””â”€ Dashboard âœï¸
â”‚        â”‚     â”œâ”€ InputBar
â”‚        â”‚     â””â”€ VideoHistoryCard[]
â”‚        â”‚         â””â”€ ğŸ“Š Learning Report Button âœ¨ NEW
â”‚        â”‚
â”‚        â”œâ”€ Route /learning-report â†’ ProtectedRoute
â”‚        â”‚  â””â”€ LearningReport âœ¨ NEW
â”‚        â”‚     â”œâ”€ StatCard Ã— 6
â”‚        â”‚     â”‚  â”œâ”€ Videos Watched
â”‚        â”‚     â”‚  â”œâ”€ Watch Time
â”‚        â”‚     â”‚  â”œâ”€ Quizzes Completed
â”‚        â”‚     â”‚  â”œâ”€ Average Score
â”‚        â”‚     â”‚  â”œâ”€ Checkpoints
â”‚        â”‚     â”‚  â””â”€ Learning Streak
â”‚        â”‚     â”‚
â”‚        â”‚     â”œâ”€ ActivitySection
â”‚        â”‚     â”‚  â””â”€ ActivityItem[]
â”‚        â”‚     â”‚     â””â”€ Activity badges
â”‚        â”‚     â”‚
â”‚        â”‚     â”œâ”€ Loading States (Skeleton)
â”‚        â”‚     â”œâ”€ Error States
â”‚        â”‚     â”œâ”€ Empty States
â”‚        â”‚     â””â”€ Action Buttons
â”‚        â”‚
â”‚        â”œâ”€ Route /video/:id â†’ ProtectedRoute
â”‚        â”‚  â””â”€ VideoPage
â”‚        â”‚
â”‚        â””â”€ Route /video/:id/quiz â†’ ProtectedRoute
â”‚           â””â”€ QuizPage
â”‚
â””â”€ Toast (Global)
```

## Data Flow Sequence

```
1. User Clicks "ğŸ“Š Learning Report"
   Dashboard.jsx â†’ navigate('/learning-report')
   
2. Route Navigation
   App.js â†’ Route matches /learning-report
   â†’ ProtectedRoute â†’ LearningReport component mounts
   
3. Component Initialization
   LearningReport.jsx â†’ useEffect runs
   â†’ Set loading = true
   â†’ Extract user.uid from Auth context
   
4. API Call
   learningReportService.getLearningReport(user.uid)
   â†’ Calls api.get('/learning-report/users/{uid}')
   â†’ Browser adds Authorization header (Firebase token)
   
5. Backend Processing
   learning_report_routes.py handler receives request
   â†’ @auth_required validates token
   â†’ Authorization check (uid matches)
   â†’ Calls get_learning_report(user_id)
   
6. Database Aggregation
   learning_report_service.py processes data
   â†’ Multiple queries to aggregate statistics
   â†’ Calculations for streak, scores, percentages
   â†’ Returns Python dict
   
7. Response Serialization
   Flask jsonify() converts dict to JSON
   â†’ Returns {data: {...}} to frontend
   â†’ Status 200 (success) or 401/403 (auth error)
   
8. Frontend Update
   Promise resolves with response data
   â†’ Set report = data
   â†’ Set loading = false
   â†’ Component re-renders
   
9. Rendering
   Conditional rendering displays:
   â†’ If loading: Show skeleton
   â†’ If error: Show error message
   â†’ If empty: Show empty state
   â†’ If success: Show statistics and activity
   
10. User Interaction
    â†’ User can click "Continue Learning"
    â†’ Navigate back to dashboard
    â†’ Or stay on page and explore report
```

## Integration Points

```
âœ¨ NEW = Personal Learning Report additions
âœï¸  MODIFIED = Existing components updated

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Authentication & Authorization              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ“ Firebase Auth (existing)                  â”‚
â”‚ âœ“ @auth_required decorator (existing)       â”‚
â”‚ âœ“ ProtectedRoute component (existing)       â”‚
â”‚ âœ“ Authorization checks (âœ¨ NEW in routes)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Database Integration                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ“ User model (existing)                     â”‚
â”‚ âœ“ UserVideoProgress model (existing)        â”‚
â”‚ âœ“ UserQuizAttempt model (existing)          â”‚
â”‚ âœ“ UserCheckpointCompletion model (existing) â”‚
â”‚ âœ“ No new tables required                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ API Integration                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ“ Flask app setup (existing)                â”‚
â”‚ âœ“ Blueprint registration (âœï¸ Modified)     â”‚
â”‚ âœ“ Error handlers (existing)                 â”‚
â”‚ âœ“ CORS configuration (existing)             â”‚
â”‚ âœ“ HTTP client (existing api.js)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend Integration                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ“ React routing (existing)                  â”‚
â”‚ âœ“ Authentication context (existing)         â”‚
â”‚ âœ“ Service layer (âœï¸ Extended)              â”‚
â”‚ âœ“ Component patterns (âœ¨ NEW)              â”‚
â”‚ âœ“ Styling system (âœï¸ Extended)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

This visual integration map shows how the Personal Learning Report feature seamlessly integrates with the existing LearnFlow architecture without breaking any existing functionality.
